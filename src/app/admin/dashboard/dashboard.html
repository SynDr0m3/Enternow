<main>
  <!-- <app-admin-header></app-admin-header> -->
  <div class="top-headers">
    <p>Welcome, {{ name }} ðŸ‘‘</p>

    <button class="create-signin-btn" (click)="openSignInModal()">
      <span class="btn-icon">+</span> Create Sign-In
    </button>
  </div>
  <section>
    <!-- Stats: value first, label second to match CSS emphasis -->
    <div class="stat-card" role="region" aria-label="Signins">
      <span>2,000</span>
      <span>Signins</span>
    </div>
    <div class="stat-card" role="region" aria-label="Lateness percentage">
      <span>5%</span>
      <span>% Lateness</span>
    </div>
    <div class="stat-card" role="region" aria-label="Early birds percentage">
      <span>95%</span>
      <span>Early birds%</span>
    </div>
    <div class="stat-card" role="region" aria-label="Suspensions">
      <span>18</span>
      <span>Suspension</span>
    </div>
  </section>

  <section>
    <!-- Two list cards: keep the inner row structure so CSS still applies -->
    <div class="list-card" role="group" aria-label="Top earliest staff">
      <div class="list-heading">
        <span>Top Earliest</span>
        <span class="muted">Staff</span>
      </div>
      <!-- List items with staff and department pairs -->
      <div class="list-item" *ngFor="let staff of staffList">
        <span class="stat-icon">{{ staff.name }}</span>
        <span class="muted">{{ staff.department }}</span>
      </div>
    </div>
    <div class="list-card" role="group" aria-label="Other top staff lists">
      <div class="list-heading">
        <span>Lateness</span>
        <span class="muted">Count</span>
      </div>
      <div class="list-item" *ngFor="let staff of staffList">
        <span class="stat-icon">{{ staff.name }}</span>
        <span class="muted">{{ staff.count }}</span>
      </div>
    </div>
  </section>

  <!-- Sign-In Modal -->
  <div class="modal-overlay" *ngIf="showSignInModal" (click)="closeSignInModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Create Sign-In for Staff</h2>
        <button class="close-btn" (click)="closeSignInModal()">&times;</button>
      </div>

      <form class="signin-form" (ngSubmit)="submitSignIn()">
        <div class="form-group">
          <label for="employeeId">Employee ID <span class="required">*</span></label>
          <input
            type="text"
            id="employeeId"
            [(ngModel)]="signInForm.employeeId"
            name="employeeId"
            placeholder="Enter employee ID"
            required
          />
        </div>

        <div class="form-group">
          <label for="department">Department <span class="required">*</span></label>
          <select id="department" [(ngModel)]="signInForm.department" name="department" required>
            <option value="" disabled selected>Select department</option>
            <option value="Engineering">Engineering</option>
            <option value="Human Resources">Human Resources</option>
            <option value="Finance">Finance</option>
            <option value="Marketing">Marketing</option>
            <option value="Operations">Operations</option>
            <option value="Sales">Sales</option>
            <option value="IT">IT</option>
          </select>
        </div>

        <div class="form-group">
          <label for="email">Email <span class="required">*</span></label>
          <input
            type="email"
            id="email"
            [(ngModel)]="signInForm.email"
            name="email"
            placeholder="employee@company.com"
            required
          />
        </div>

        <div class="form-group">
          <label for="signInTime">Sign-In Time</label>
          <input
            type="time"
            id="signInTime"
            [(ngModel)]="signInForm.signInTime"
            name="signInTime"
          />
          <small class="helper-text">Leave blank to use current time</small>
        </div>

        <div class="form-group">
          <label for="notes">Notes (Optional)</label>
          <textarea
            id="notes"
            [(ngModel)]="signInForm.notes"
            name="notes"
            placeholder="Add any relevant notes about this sign-in..."
            rows="3"
          ></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-cancel" (click)="closeSignInModal()">Cancel</button>
          <button type="submit" class="btn-submit">Create Sign-In</button>
        </div>
      </form>

      <div class="success-message" *ngIf="showSuccessMessage">
        <span class="success-icon">âœ“</span>
        Sign-in created successfully!
      </div>
    </div>
  </div>
</main>
